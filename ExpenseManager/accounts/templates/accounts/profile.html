{% extends 'accounts/base.html' %}

{% block title %}User Profile{% endblock %}

{% block content %}
<div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-2xl mx-auto">
    <h2 class="text-3xl font-extrabold text-gray-900 mb-2">Profile: {{ object.username }}</h2>
    <p class="text-gray-500 mb-6">Role: <span class="font-semibold text-indigo-600">{{ object.get_role_display }}</span> | Company: <span class="font-semibold">{{ object.company.name }}</span></p>

    <form method="post" class="space-y-6">
        {% csrf_token %}
        {{ form.as_p }}
        <div class="pt-2">
            <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                Update Profile
            </button>
        </div>
    </form>

    {% if object.managers.all %}
    <div class="mt-10 border-t border-gray-200 pt-6">
        <h3 class="text-xl font-bold text-gray-900 mb-4">Your Manager(s):</h3>
        <ul class="space-y-3">
            {% for manager in object.managers.all %}
                <li class="bg-gray-50 p-4 rounded-md flex justify-between items-center">
                    <span>{{ manager.username }} ({{ manager.get_role_display }})</span>
                    <a href="{% url 'profile' manager.pk %}" class="text-sm text-indigo-600 hover:underline">View Profile</a>
                </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    {% if object.subordinates.all %}
    <div class="mt-10 border-t border-gray-200 pt-6">
        <h3 class="text-xl font-bold text-gray-900 mb-4">Managing:</h3>
        <ul class="space-y-3">
            {% for subordinate in object.subordinates.all %}
                <li class="bg-gray-50 p-4 rounded-md flex justify-between items-center">
                    <span>{{ subordinate.username }} ({{ subordinate.get_role_display }})</span>
                    <a href="{% url 'profile' subordinate.pk %}" class="text-sm text-indigo-600 hover:underline">View Profile</a>
                </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
</div>
{% endblock %}

